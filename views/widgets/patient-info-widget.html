<div class="col-md-12 no-spacing" ng-if="currentPatient">
    <div class="panel panel-primary">
        <span class="panel-heading"><i class="glyphicon glyphicon-user"></i>&nbsp;&nbsp;{{currentPatient.displayname}}</span>
        <div class="panel-body">
            <fieldset>
                <ul class="list-group">
                    <li class="list-group-item">
                        <label><span style="float: left;"><b>Name:</b></span><span style="float:right;">{{currentPatient.displayname}}</span></label>
                    </li>
                    <li class="list-group-item">
                        <label><span style="float: left;"><b>Gender:</b></span><span style="float:right;">{{currentPatient.gender}}</span></label>
                    </li>
                    <li class="list-group-item">
                        <label><span style="float: left;"><b>DOB:</b></span><span style="float:right;">{{currentPatient.dob | date: "yyyy-MM-dd"}}</span></label>
                    </li>
                    <li class="list-group-item">
                        <label><span style="float: left;"><b>MID:</b></span><span style="float:right;">{{currentPatient._id}}</span></label>
                    </li>
                </ul>
                <img ng-src="{{currentPatient.photo}}" style="float:left;">
            </fieldset>
            <div ng-controller="WorkflowController">
                <button ng-if="!currentWorkflow" ng-click="dump(currentWorkflow)">Mas Informes</button>
                <ul class="list-group col-md-2">
                    <li ng-repeat="ref in currentWorkflow.forms" class="list-group-item">
                        <button ng-click="setCurrentReport(ref)" class="btn-block">{{findForm(ref.id).displayname}}</button>
                    </li>
                </ul>
                <fieldset>
                    <legend>{{findForm(currentReport.id).displayname}}</legend>
                    <ul class="list-group">
                        <li class="list-group-item" ng-repeat="field in findForm(currentReport.id).fields">
                            <label><span style="float: left;"><b>{{field.displayname}}:</b></span><span style="float:right;">{{dynamicModel(field.databind) || "no hay"}}</span></label>
                        </li>
                    </ul>
                </fieldset>
            </div>
            <prescription-widget></prescription-widget>
            <table class="table table-striped table-responsive">
                <tr ng-repeat="(key, value) in currentPatient.extraInfo"><td><b>{{key}}:</b></td><td>{{value}}</td></tr>
            </table>
        </div>
    </div>
</div>